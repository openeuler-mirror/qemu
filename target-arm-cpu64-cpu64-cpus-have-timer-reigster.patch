From 5d5b61652225c84ac2f34d65ae01aeb2f8c683e6 Mon Sep 17 00:00:00 2001
From: zhanghailiang <zhang.zhanghailiang@huawei.com>
Date: Thu, 28 May 2020 20:10:19 +0800
Subject: [PATCH] target/arm/cpu64: cpu64 cpus have timer reigster

Add the missing GENERIC_TIMER feature to cpu64 cpu.

Signed-off-by: zhanghailiang <zhang.zhanghailiang@huawei.com>
---
 target/arm/cpu64.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/target/arm/cpu64.c b/target/arm/cpu64.c
index b30ca7c9..162713d7 100644
--- a/target/arm/cpu64.c
+++ b/target/arm/cpu64.c
@@ -221,6 +221,7 @@ static void aarch64_a72_initfn(Object *obj)
     set_feature(&cpu->env, ARM_FEATURE_EL2);
     set_feature(&cpu->env, ARM_FEATURE_EL3);
     set_feature(&cpu->env, ARM_FEATURE_PMU);
+    set_feature(&cpu->env, ARM_FEATURE_GENERIC_TIMER);
     cpu->midr = 0x410fd083;
     cpu->revidr = 0x00000000;
     cpu->reset_fpsid = 0x41034080;
-- 
2.23.0

